
<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Learning How to Program in SAS">
      
      
      
        <meta name="author" content="LucÃ­a Rodrigo Insausti">
      
      
        <link rel="shortcut icon" href="../../assets/images/favicon.png">
      
      <meta name="generator" content="mkdocs-0.16.3, mkdocs-material-1.8.1">
    
    
      
        <title>Model Post-Fitting for Inference - SAS Manual</title>
      
    
    
      <script src="../../assets/javascripts/modernizr-1df76c4e58.js"></script>
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application-bfecc7305d.css">
      
    
    
      
        
        
        
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
    
  </head>
  
  
  
  
    <body>
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <a href="../.." title="SAS Manual" class="md-icon md-icon--home md-header-nav__button">
          </a>
        
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <span class="md-flex__ellipsis md-header-nav__title">
          
            
              
                <span class="md-header-nav__parent">
                  Basic Statistics
                </span>
              
            
            Model Post-Fitting for Inference
          
        </span>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="search"></label>
  <div class="md-search__inner">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" required placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query">
      <label class="md-icon md-search__icon" for="search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset">close</button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result" data-md-lang-search="" data-md-lang-tokenizer="[\s\-]+">
          <div class="md-search-result__meta" data-md-lang-result-none="No matching documents" data-md-lang-result-one="1 matching document" data-md-lang-result-other="# matching documents">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    
      <i class="md-icon md-icon--home md-nav__button"></i>
    
    SAS Manual
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Gettin' Started!" class="md-nav__link">
      Gettin' Started!
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      The Essentials
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        The Essentials
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../essentials/accessing/" title="Accessing Data" class="md-nav__link">
      Accessing Data
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../essentials/reporting/" title="Producing Detailed Reports" class="md-nav__link">
      Producing Detailed Reports
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../essentials/formatting/" title="Formatting Data Values" class="md-nav__link">
      Formatting Data Values
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../essentials/reading-sas/" title="Reading SAS Data Sets" class="md-nav__link">
      Reading SAS Data Sets
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../essentials/reading-spreadsheets/" title="Reading Spreadsheet and Database Data" class="md-nav__link">
      Reading Spreadsheet and Database Data
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../essentials/reading-raw/" title="Reading Raw Data Files" class="md-nav__link">
      Reading Raw Data Files
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../essentials/manipulation/" title="Manipulating Data" class="md-nav__link">
      Manipulating Data
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../essentials/combination/" title="Combining SAS Data Sets" class="md-nav__link">
      Combining SAS Data Sets
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../essentials/summary/" title="Creating Summary Reports" class="md-nav__link">
      Creating Summary Reports
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3" checked>
    
    <label class="md-nav__link" for="nav-3">
      Basic Statistics
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Basic Statistics
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../introduction/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../anova/" title="Analysis of Variance (ANOVA)" class="md-nav__link">
      Analysis of Variance (ANOVA)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../regression/" title="Regression" class="md-nav__link">
      Regression
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        Model Post-Fitting for Inference
      </label>
    
    <a href="./" title="Model Post-Fitting for Inference" class="md-nav__link md-nav__link--active">
      Model Post-Fitting for Inference
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#examining-residuals" title="Examining Residuals" class="md-nav__link">
    Examining Residuals
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#proc-reg" title="PROC REG" class="md-nav__link">
    PROC REG
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#identifying-influential-observations" title="Identifying Influential Observations" class="md-nav__link">
    Identifying Influential Observations
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-student-residuals-to-detect-outliers" title="Using STUDENT residuals to detect outliers" class="md-nav__link">
    Using STUDENT residuals to detect outliers
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-cooksd-statistics-to-detect-influential-observations" title="Using COOKSD statistics to detect influential observations" class="md-nav__link">
    Using COOKSD statistics to detect influential observations
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-rstudent-residuals-to-detect-influential-observations" title="Using RSTUDENT residuals to detect influential observations" class="md-nav__link">
    Using RSTUDENT residuals to detect influential observations
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-dffits-statistics-to-detect-influential-observations" title="Using DFFITS statistics to detect influential observations" class="md-nav__link">
    Using DFFITS statistics to detect influential observations
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-dfbetas-statistics-to-explore-the-influenced-predictor-variable" title="Using DFBETAS statistics to explore the influenced predictor variable" class="md-nav__link">
    Using DFBETAS statistics to explore the influenced predictor variable
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#proc-glmselect" title="PROC GLMSELECT" class="md-nav__link">
    PROC GLMSELECT
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#detecting-collinearity" title="Detecting Collinearity" class="md-nav__link">
    Detecting Collinearity
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#effective-modeling-cycle" title="Effective modeling cycle" class="md-nav__link">
    Effective modeling cycle
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../categorical-data/" title="Categorical Data Analysis" class="md-nav__link">
      Categorical Data Analysis
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../prediction/" title="Model Building and Scoring for Prediction" class="md-nav__link">
      Model Building and Scoring for Prediction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../miscellanea/" title="Miscellanea" class="md-nav__link">
      Miscellanea
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Other Analysis
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Other Analysis
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../other-analysis/missing-data/" title="Dealing with Missing Data" class="md-nav__link">
      Dealing with Missing Data
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../other-analysis/interim-analysis/" title="Interim Analysis Design" class="md-nav__link">
      Interim Analysis Design
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../other-analysis/normality-tests/" title="Normality tests" class="md-nav__link">
      Normality tests
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../other-analysis/propensity-score/" title="Propensity Score" class="md-nav__link">
      Propensity Score
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../other-analysis/roc-curve/" title="ROC curve" class="md-nav__link">
      ROC curve
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../other-analysis/survival-analysis/" title="Survival Analysis" class="md-nav__link">
      Survival Analysis
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../other-analysis/clustering/" title="Clustering" class="md-nav__link">
      Clustering
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Specific Procedures
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Specific Procedures
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../procedures/regression-models/" title="General notes on regression procedures" class="md-nav__link">
      General notes on regression procedures
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../procedures/glimmix/" title="PROC GLIMMIX" class="md-nav__link">
      PROC GLIMMIX
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../procedures/mixed/" title="PROC MIXED" class="md-nav__link">
      PROC MIXED
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      SAS Outputs
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        SAS Outputs
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../sas-outputs/reports/" title="Reports" class="md-nav__link">
      Reports
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../sas-outputs/graphs/" title="Graphs and Plots" class="md-nav__link">
      Graphs and Plots
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../sas-outputs/templates/" title="Templates" class="md-nav__link">
      Templates
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../macros/" title="Using Macros" class="md-nav__link">
      Using Macros
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../wizard/" title="Using Wizard Menus" class="md-nav__link">
      Using Wizard Menus
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../sasvi/" title="SAS Visual Analytics" class="md-nav__link">
      SAS Visual Analytics
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10" type="checkbox" id="nav-10">
    
    <label class="md-nav__link" for="nav-10">
      Miscellanea
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-10">
        Miscellanea
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../miscellanea/arrays/" title="Working with Arrays" class="md-nav__link">
      Working with Arrays
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../miscellanea/execution-time/" title="Execution time" class="md-nav__link">
      Execution time
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../miscellanea/patient-identification/" title="Patient identification" class="md-nav__link">
      Patient identification
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#examining-residuals" title="Examining Residuals" class="md-nav__link">
    Examining Residuals
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#proc-reg" title="PROC REG" class="md-nav__link">
    PROC REG
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#identifying-influential-observations" title="Identifying Influential Observations" class="md-nav__link">
    Identifying Influential Observations
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-student-residuals-to-detect-outliers" title="Using STUDENT residuals to detect outliers" class="md-nav__link">
    Using STUDENT residuals to detect outliers
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-cooksd-statistics-to-detect-influential-observations" title="Using COOKSD statistics to detect influential observations" class="md-nav__link">
    Using COOKSD statistics to detect influential observations
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-rstudent-residuals-to-detect-influential-observations" title="Using RSTUDENT residuals to detect influential observations" class="md-nav__link">
    Using RSTUDENT residuals to detect influential observations
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-dffits-statistics-to-detect-influential-observations" title="Using DFFITS statistics to detect influential observations" class="md-nav__link">
    Using DFFITS statistics to detect influential observations
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-dfbetas-statistics-to-explore-the-influenced-predictor-variable" title="Using DFBETAS statistics to explore the influenced predictor variable" class="md-nav__link">
    Using DFBETAS statistics to explore the influenced predictor variable
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#proc-glmselect" title="PROC GLMSELECT" class="md-nav__link">
    PROC GLMSELECT
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#detecting-collinearity" title="Detecting Collinearity" class="md-nav__link">
    Detecting Collinearity
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#effective-modeling-cycle" title="Effective modeling cycle" class="md-nav__link">
    Effective modeling cycle
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                  <h1>Model Post-Fitting for Inference</h1>
                
                <p><a href="https://support.sas.com/edu/OLTRN/ECST131/m554/m554_4_a_sum.htm">Chapter summary in SAS</a></p>
<p>How to <strong>verify the assumptions</strong> and <strong>diagnose problems</strong> that you encounter in <strong>linear regression</strong>?</p>
<h2 id="examining-residuals">Examining Residuals<a class="headerlink" href="#examining-residuals" title="Permanent link">&para;</a></h2>
<p>You can use the <strong>residual values</strong> (difference between each observed value of $Y$ and its predicted value) from the regression analysis to verify the <strong>assumptions of the linear regression</strong>. Residuals are estimates of the errors, so you can <strong>plot the residuals to check the assumptions of the errors</strong>.</p>
<ul>
<li>You can plot residuals vs the predicted values to check for <strong>violations of equal variances</strong></li>
<li>You can also use this plot to check for <strong>violations of linearity and independence</strong></li>
<li>You can plot the residuals vs the values of the independent variables to <strong>further examine any violations of equal variances</strong> (you can see which predictor contributes to the violation of the assumption)</li>
<li>You can use a histogram or a normal probability plot of the residuals to determine whether or not the <strong>errors are normally distributed</strong></li>
</ul>
<p>You want to see a <strong>random scatter of the residual values</strong> above and below the reference line at 0. If you see <strong>patterns or trends</strong> in the residual values, the assumptions might not be valid and the models might have problems.</p>
<p><img alt="Assumptions violation examples" src="../../images/assumption-violation.PNG" title="Assumptions violation examples" /></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>To take autocorrelation (correlated over time) into account, you might need to use a regression procedure such as <strong>PROC AUTOREG</strong></p>
</div>
<p>You can also use these plots to <strong>detect outliers</strong>, which often reflect data errors or unusual circumstances. They can affect your regression results, so you want to know whether any outliers are present and causing problems and investigate if they result from <strong>data entry error or some other problem</strong> that you can correct.</p>
<h3 id="proc-reg"><code>PROC REG</code><a class="headerlink" href="#proc-reg" title="Permanent link">&para;</a></h3>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>PROC REG DATA=SAS-data-set PLOTS(ONLY)=(QQ RESIDUALBYPREDICTED RESIDUALS)<span class="nt">&lt;options&gt;</span>;
    <span class="nt">&lt;label:&gt;</span> MODEL dependent=regressor(s) <span class="nt">&lt;/options&gt;</span>;
    ID variable4identification;
RUN;
QUIT;
</pre></div>
</td></tr></table>

<ul>
<li><code>QQ</code> requests a residual quantile-quantile plot to assess the normality of the residual error</li>
<li><code>RESIDUALBYPREDICTED</code> requests a plot of residuals by predicted values to verify the equal variance assumption, the independence assumption and model adequacy</li>
<li><code>RESIDUALS</code> requests a panel of plots of residuals by the predictor variables in the model: if any of the <em>Residual by Regressors</em> plots show signs of unequal variance, we can determine which predictor variable is involved in the problem</li>
</ul>
<h2 id="identifying-influential-observations">Identifying Influential Observations<a class="headerlink" href="#identifying-influential-observations" title="Permanent link">&para;</a></h2>
<p>An influential observation is different from an outlier. An <strong>outlier</strong> is an unusual observation that has a large residual compare to the rest of the points. An <strong>influential observation</strong> can sometimes have a large residual compared to the rest of the points, but it is an observation so far away from the rest of the data that it singlehandedly exerts influence on the slope of the regression line.</p>
<p><img alt="Outlier vs influential observation" src="../../images/outlier_vs_influential-observation.PNG" title="Outlier vs influential observation" /></p>
<h3 id="using-student-residuals-to-detect-outliers">Using <code>STUDENT</code> residuals to detect outliers<a class="headerlink" href="#using-student-residuals-to-detect-outliers" title="Permanent link">&para;</a></h3>
<p>Also known as <strong>studientized or standardized residuals</strong>, the <code>STUDENT</code> residuals are calculated by dividing the <strong>residual by their standard errors</strong>, so you can think of them as roughly equivalent to a z-score. </p>
<ul>
<li>For <strong>relatively small sample sizes</strong>, if the absolute value of the <code>STUDENT</code> <strong>residual is $&gt;2$</strong>, you can suspect that the corresponding observation is an outlier</li>
<li>For <strong>large sample sizes</strong>, it's very likely that even more <code>STUDENT</code> <strong>residuals greater than $\pm2$</strong> will occur just by chance, so you should typically use a larger cutoff value of $&gt;3$</li>
</ul>
<h3 id="using-cooksd-statistics-to-detect-influential-observations">Using <code>COOKSD</code> statistics to detect influential observations<a class="headerlink" href="#using-cooksd-statistics-to-detect-influential-observations" title="Permanent link">&para;</a></h3>
<p>For each observation, the Cook's D statistic is <strong>calculated as if that observation weren't in the data set</strong> as well as the set of parameter estimates with all the observations in your regression analysis. </p>
<ul>
<li>If any observation has a Cook's D <strong>statistic $&gt;4/n$</strong> that observation is influential</li>
<li>The Cook's D statistic is most useful for identifying influential observations when the purpose of your model is <strong>parameter estimation</strong></li>
</ul>
<h3 id="using-rstudent-residuals-to-detect-influential-observations">Using <code>RSTUDENT</code> residuals to detect influential observations<a class="headerlink" href="#using-rstudent-residuals-to-detect-influential-observations" title="Permanent link">&para;</a></h3>
<p><code>RSTUDENT</code> residuals are similar to <code>STUDENT</code> residuals. For each observation, the <code>RSTUDENT</code> residual is the <strong>residual divided by the standard error estimated with the current observation deleted</strong>.</p>
<ul>
<li>If the RSTUDENT residual is different from the <code>STUDENT</code> residual, the observation is probably influential</li>
<li>If the absolute value of the <code>RSTUDENT</code> residuals is $&gt;2$ or $&gt;3$, you've probably detected an influential observation</li>
</ul>
<h3 id="using-dffits-statistics-to-detect-influential-observations">Using <code>DFFITS</code> statistics to detect influential observations<a class="headerlink" href="#using-dffits-statistics-to-detect-influential-observations" title="Permanent link">&para;</a></h3>
<p><code>DFFITS</code> measures the impact that each observation has on its own predicted value. For each observation, <code>DFFITS</code> is <strong>calculated using two predicted values</strong>:</p>
<ul>
<li>The first predicted value is calculated from a model using the entire data set to estimate model parameters</li>
<li>The second predicted value is calculated from a model using the data set with that particular observation removed to estimate model parameters</li>
<li>The difference between the two predicted values is divided by the standard error of the predicted value, without the observation</li>
</ul>
<p>If the <strong>standardized difference</strong> between these predicted values <strong>is large</strong>, that particular observation has a <strong>large effect on the model fit</strong>.</p>
<ul>
<li>The <strong>general cutoff</strong> value is $2$</li>
<li>The more <strong>precise cutoff</strong> is $2 \cdot sqrt(p/n)$</li>
<li>If the absolute value of DFFITS for any observation is $&gt;$ cutoff value, you've detected an influential observation</li>
<li><code>DFFITS</code> is most useful for <strong>predictive models</strong></li>
</ul>
<h3 id="using-dfbetas-statistics-to-explore-the-influenced-predictor-variable">Using <code>DFBETAS</code> statistics to explore the influenced predictor variable<a class="headerlink" href="#using-dfbetas-statistics-to-explore-the-influenced-predictor-variable" title="Permanent link">&para;</a></h3>
<p>To help identifying which parameter the observation might be influencing most you can use <code>DFBETAS</code> (difference in betas). It measure the change in each parameter estimate. </p>
<ul>
<li>One <code>DFBETAS</code> is calculated per predictor variable per observation</li>
<li>Each value is calculated by taking the estimated coefficient for that particular predictor variable <strong>using all the data</strong>, subtracting the estimated coefficient for that particular predictor variable with the <strong>current observation removed</strong> and dividing by its standard error</li>
<li>Large <code>DFBETAS</code> indicate observations that are influential in estimating a given parameter:<ul>
<li>The <strong>general cutoff</strong> value is $2$</li>
<li>The more <strong>precise cutoff</strong> is $2 \cdot sqrt(1/n)$</li>
</ul>
</li>
</ul>
<h3 id="proc-glmselect"><code>PROC GLMSELECT</code><a class="headerlink" href="#proc-glmselect" title="Permanent link">&para;</a></h3>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>PROC GLMSELECT DATA=SAS-data-set <span class="nt">&lt;options&gt;</span>;
    <span class="nt">&lt;label:&gt;</span> MODEL dependent(s) = regressor(s) / <span class="nt">&lt;/options&gt;</span>;
RUN;
QUIT;

ODS OUTPUT RSTUDENTBYPREDICTED=name-rstud-data-set
           COOKSDPLOT=name-cooksd-data-set
           DFFITSPLOT=name-dffits-data-set
           DFBETASPANEL=name-dfbs-data-set;

PROC REG DATA=SAS-data-set PLOTS(ONLY LABEL)=
                                (RSTUDENTBYPREDICTED 
                                 COOKSD 
                                 DFFITS 
                                 DFBETAS) <span class="nt">&lt;options&gt;</span>;
    <span class="nt">&lt;label:&gt;</span> MODEL dependent=<span class="err">&amp;</span>_GLSIND <span class="nt">&lt;/options&gt;</span>;
    ID variable4identification;
RUN;
QUIT;

DATA influential;
    MERGE name-rstud-data-set
          name-cooksd-data-set
          name-dffits-data-set
          name-dfbs-data-set;
    BY observation;

    IF (ABS(RSTUDENT)&gt;3) OR (COOKSDLABEL NE &#39; &#39;) OR DFFITSOUT THEN FLAG=1;
    ARRAY DFBETAS{*} _DFBETASOUT: ;
    DO I=2 TO DIM(DFBETAS);
        IF DFBETAS{I} THEN FLAG=1;
    END;

    IF ABS(RSTUDENT)<span class="err">&lt;</span>=3 THEN RSTUDENT=.;
    IF COOKSDLABEL EQ &#39; &#39; THEN COOKSD=.;

    IF FLAG=1;
    DROP I FLAG;
RUN;

PROC PRINT DATA=influential;
    ID observation;
    VAR RSTUDENT COOKSD DFFITSOUT _DFBETASOUT: ;
RUN;
</pre></div>
</td></tr></table>

<ul>
<li><code>PROC GLMSELECT</code> automatically creates the <code>&amp;_GLSIND</code> macro variable which stores the list of effects that are in the model whose variable order can be checked in the <em>Influence Diagnostics</em> panel</li>
<li>The <code>ODS</code> statement takes the data that creates each of the requested plots and saves it in the specified data set</li>
<li>The <code>LABEL</code> option includes a label for the extreme observations in the plot (labeled with the observation numbers if there is not ID specified)</li>
</ul>
<p>Having <strong>influential observations doesn't violate regression assumptions</strong>, but it's a major nuisance that you need to address:</p>
<ol>
<li><strong>Recheck</strong> for data entry errors</li>
<li>If the data appears to be valid, <strong>consider whether you have an adequate model</strong> (a different model might fit the data better). Divide the number of influential observations you detect by the number of observations in you data set: if the result is <strong>$&gt;5\%$ you probably have the wrong model</strong>.</li>
<li>Determine whether the influential observation is <strong>valid but just unusual</strong></li>
<li>As a general rule you should <strong>not exclude data</strong> (some unusual observations contain important information)</li>
<li>If you choose to exclude some observations, include in your report a <strong>description of the types of observations that you excluded and why</strong> and discuss the limitation of the conclusions given the exclusions</li>
</ol>
<h2 id="detecting-collinearity">Detecting Collinearity<a class="headerlink" href="#detecting-collinearity" title="Permanent link">&para;</a></h2>
<p>Collinearity (or multicollinearity) is a problem that you face in multiple regression. It occurs when two or more <strong>predictor variables are highly correlated with each other</strong> (<strong>redundant information</strong> among them, the predictor variables explain much of the same variation in the response). Collinearity doesn't violate the assumptions of multiple regression.</p>
<ul>
<li>Collinearity can <strong>hide significant effects</strong> (if you include only one of the collinear variables in the model it is significant but when there are more than one included none of them are significant)</li>
<li>Collinearity <strong>increases the variance</strong> of the parameter estimates, making them <strong>unstable</strong> (the data points don't spread out enough in the space to provide stable support for the plane defined by the model) and, in turn, this <strong>increases the prediction error</strong> of the model</li>
</ul>
<p>When an overall model is highly significant but the individual variables don't tell the same story, it's a <strong>warning sign of collinearity</strong>. When the <strong>standard error for an estimate is larger than the parameter estimate</strong> itself, it's not going to be statistically significant. The SE tells us how variable the corresponding parameter estimate is: when the standard errors are high, the <strong>model lacks stability</strong>.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>PROC REG DATA=SAS-data-set <span class="nt">&lt;options&gt;</span>;
    <span class="nt">&lt;label:&gt;</span> MODEL dependent = regressors / VIF <span class="nt">&lt;/options&gt;</span>;
RUN;
QUIT;
</pre></div>
</td></tr></table>

<ul>
<li>The <code>VIF</code> (variance inflation factor, $VIF_i=1/(1-R_i^2)$) option measures the magnitude of collinearity in a model (VIF$&gt;10$ for any predictor in the model, those predictors are probably involved in collinearity)</li>
<li>Other options are <code>COLLIN</code> (includes the intercept when analyzing collinearity and helps identify the predictors that are causing the problem) and <code>COLLINOINT</code> (requests the same analysis as <code>COLLIN</code> but excludes the intercept)</li>
</ul>
<h3 id="effective-modeling-cycle">Effective modeling cycle<a class="headerlink" href="#effective-modeling-cycle" title="Permanent link">&para;</a></h3>
<ol>
<li>You want to get to know your data by <strong>performing preliminary analysis</strong>: <ul>
<li>Plot your data</li>
<li>Calculate descriptive statistics </li>
<li>Perform correlation analysis</li>
</ul>
</li>
<li>Identify some <strong>good candidate models</strong> using <code>PROC REG</code>: <ul>
<li>First check for collinearity </li>
<li>Use all-possible regression or stepwise selection methods and subject matter knowledge to select model candidates</li>
<li>Identify the good ones with the Mallows' (prediction) or Hocking's (explanatory) criterion for $C_p$</li>
</ul>
</li>
<li>
<p><strong>Check and validate your assumtions</strong> by creating residual plots and conducting a few other statistical tests</p>
</li>
<li>
<p>Deal with any <strong>problems in your data</strong>: </p>
<ul>
<li>Determine whether any influential observations might be throwing off your model calculations</li>
<li>Determine whether any variables are collinear</li>
</ul>
</li>
<li>
<p><strong>Revise your model</strong></p>
</li>
<li>
<p><strong>Validate your model</strong> with data not used to build the  model (prediction testing)</p>
</li>
</ol>
                
                  
                
              
              
                
              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../regression/" title="Regression" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Regression
              </span>
            </div>
          </a>
        
        
          <a href="../categorical-data/" title="Categorical Data Analysis" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Categorical Data Analysis
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="http://www.mkdocs.org" title="MkDocs">MkDocs</a>
        and
        <a href="http://squidfunk.github.io/mkdocs-material/" title="Material for MkDocs">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application-6940329b9f.js"></script>
      
      
      <script>app.initialize({url:{base:"../.."}})</script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
      
        <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>
      
        <script src="../../js/mathjaxhelper.js"></script>
      
        <script src="../../superfences"></script>
      
    
    
      
    
  </body>
</html>